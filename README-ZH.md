# nHentai 助手

也支持 NyaHentai（而且下载的是原图）

## 主要功能

1. 为 nHentai 增加 ZIP (CBZ) 打包下载方式
2. 使本子列表页支持 pjax，翻页不会中断本子下载
3. 在本子列表页下载时拥有下载队列，并且具有重复下载提醒，即当你下载了一个你以前下载过的本子时将会弹出警告，即使他们由不同字幕组翻译但是同一个本子（历史记录上限为`500`）

![](https://i.loli.net/2019/01/26/5c4c5d5914197.png)

![](https://i.loli.net/2018/12/26/5c23a39505d14.png)

## 设置

![](https://i.loli.net/2020/02/18/iZKI9hfcLymdrBj.png)

1. **Download Thread 下载线程数**  
   如果你觉得下载太慢，可以适当提高线程数，不过你得清楚，挂（一个好一点的）代理才是拯救辣鸡网络的实在方法
2. **Open On New Tab 在新选项卡打开**  
   本子详情页会默认变为在新选项卡中打开，如果不喜欢就关掉它
3. **Custom Download URL 自定义下载链接**  
   **警告：不知道这是干什么的就不要动**  
   提示：你可能还需要往脚本设置的 *XHR 安全* 中加入域名  
   提供一个包含以下占位符的字符串：
   - `{{mid}}` - Media ID
   - `{{index}}` - 页号
   - `{{ext}}` - 图片扩展名
4. **Compression File Extension 压缩文件扩展名**  
   默认是`zip`，你可以设置为自己想要的比如`cbz`
5. **Compression Level 压缩等级**  
   范围为`0-9`，`0`是无压缩，`1`是最快压缩，`9`是最好压缩，默认为`0`  
   其实对于本子，`0`和`9`压出来的文件大小差别通常不到 **1%**

## 其他功能

### 语言过滤

你可以在导航栏中选择一个语言来过滤本子

![](https://i.loli.net/2019/03/25/5c98d07cca0ac.png)

### 100% 视图高度

在线阅读时可开启或关闭

![](https://i.loli.net/2019/09/04/EYu5iP9L46b8XUf.png)

### 去除 nhentai 的 console 屏蔽

有尝试为 nhentai 开发脚本的朋友应该也会头疼这个问题，nhentai 会不停的执行`console.clear`，即使你`console.clear=()=>{}`，也仍然会每秒 log 出一个`<div></div>`，很是烦人

在我刚开始开发这个脚本的时候我的解决方法非常暴力，将那个罪魁祸首 js 下载一份传到我自己的服务器上，删掉里面调用了`console`的代码，然后用重定向插件进行重定向，这样可以保证不会破坏`console`

但该 js 也会时不时更新，我也得重新更新，虽然更新频率很低，总归是很麻烦的

于是我还是决定使用一劳永逸的方法，这一方法你可以在脚本源码开头看到，因为其会对`console`进行一些破坏性的改动，因此我在这里进行专门说明

**你只需要注意两点：**

1. 如果需要调用`console.clear`，请调用`console._clear`
2. 如果需要`console.log`一个`Node`或者`HTMLElement`，请调用`console._log`，或者`console.info`等
